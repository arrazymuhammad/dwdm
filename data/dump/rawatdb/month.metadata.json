{"options":{"viewOn":"RawatInap","pipeline":[{"$unwind":"$tindakan"},{"$project":{"pasien":"$pasien","_id":{"date":{"$dayOfMonth":"$tindakan.waktu"},"year":{"$year":"$tindakan.waktu"},"month":{"$month":"$tindakan.waktu"}},"biaya_tindakan":"$tindakan.biaya"}},{"$group":{"_id":{"year":"$_id.year","month":"$_id.month"},"total_biaya":{"$sum":"$biaya_tindakan"}}},{"$addFields":{"year":{"$concat":[{"$toString":"$_id.year"},"-",{"$toString":"$_id.month"},"-",{"$toString":"$_id.date"}]}}},{"$sort":{"_id":{"$numberInt":"1"}}}]},"indexes":[],"collectionName":"month"}